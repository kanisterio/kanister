apiVersion: cr.kanister.io/v1alpha1
kind: RepositoryServer
metadata:
  name: kopia-repo-server-1
  namespace: kanister
  labels:
    repo.kanister.io/target-namespace: mysql
spec:
  storage:
    secretRef:
      name: s3-location
      namespace: default
    credentialSecretRef:
      name: s3-creds
      namespace: default
  repository:
    rootPath: /repo/path/
    passwordSecretRef:
      name: repo-pass
      namespace: default
    username: kanisterAdmin
    hostname: mysql.app
  server:
    adminSecretRef:
      name: repository-admin-user
      namespace: default
    tlsSecretRef:
      name: repository-server-tls-cert
      namespace: default
    userAccessSecretRef:
      name: repository-server-user-access
      namespace: default
    networkPolicyIngressRule:
      namespaceSelector:
        matchLabels:
          project: mysql
